(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},19:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),u=n(5),c=n(3),o=n(0),l=n.n(o),i=(n(19),n(15)),s=n.n(i),f=n(4),m=n.n(f),v="/api/persons",d=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(m.a.get(v));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},p=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(m.a.post(v,e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},b=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(m.a.delete("".concat(v,"/").concat(e)));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}))},h=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(m.a.put("".concat(v,"/").concat(e),t));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},E=function(e){var t=e.names,n=e.fil,a=e.del;if(0!==t.length){n=n.trim();var r=new RegExp(n.toLowerCase(),"g"),u=t.map((function(e){if(e.name.toLowerCase().search(r)>-1)return l.a.createElement("div",{key:e.name},l.a.createElement("p",null,"Name: ",e.name," Number: ",e.number," "),l.a.createElement("button",{onClick:a,value:e._id}," Delete "))}));return l.a.createElement("div",null,u)}return l.a.createElement("div",null,l.a.createElement("h1",null," Numbers not loaded "))},w=function(e){var t=e.change,n=e.val,a=t[0],r=t[2],u=t[1];return l.a.createElement("form",{onSubmit:function(e){return u(e)}},l.a.createElement("div",null,"name: ",l.a.createElement("input",{type:"text",value:n[0],onChange:function(e){return r(e)}})),l.a.createElement("div",null,"number: ",l.a.createElement("input",{type:"number",value:n[1],onChange:function(e){return a(e)}})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.change,n=e.fil;return l.a.createElement("div",null,l.a.createElement("input",{type:"text",value:n,onChange:function(e){return t(e)}}))},y=function(e){var t=e.message;return null==t?null:l.a.createElement("div",{className:"msg"},t)},j=function(e){var t=e.error;return null==t?null:l.a.createElement("div",{className:"err"},t)};s.a.render(l.a.createElement((function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(""),s=Object(c.a)(i,2),f=s[0],m=s[1],v=Object(o.useState)(""),x=Object(c.a)(v,2),O=x[0],T=x[1],k=Object(o.useState)(""),C=Object(c.a)(k,2),S=C[0],D=C[1],N=Object(o.useState)(null),U=Object(c.a)(N,2),J=U[0],L=U[1],_=Object(o.useState)(null),A=Object(c.a)(_,2),B=A[0],I=A[1];Object(o.useEffect)((function(){d().then((function(e){a(e)})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)}))}),[]);return l.a.createElement("div",null,l.a.createElement("h2",null,"Phonebook"),l.a.createElement(g,{change:function(e){m(e.target.value)},fil:f}),l.a.createElement(y,{message:J}),l.a.createElement(j,{error:B}),l.a.createElement(w,{change:[function(e){D(e.target.value)},function(e){var t=Object(u.a)(n),r=S,c=t.every((function(e){return e.name!==O})),o=t.every((function(e){return e.number!==r}));if(c||o)if(!c&&o){if(e.preventDefault(),window.confirm("Do you want to update ?")){var l=t.find((function(e){return e.name==O}));l=l._id,h(l,{name:O,number:S}).then((function(){var e="".concat(O," Updated");L(e),d().then((function(e){a(e)})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)})),setTimeout((function(){L(null)}),5e3),T(""),D("")})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)}))}}else{p({name:O,number:r}).then((function(e){t=Object(u.a)(n),a(e);var r="".concat(O," Added");L(r),setTimeout((function(){L(null)}),5e3),d().then((function(e){a(e)})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)}))})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)})),T(""),D(""),e.preventDefault()}else{e.preventDefault();var i="".concat(O," already present");L(i),setTimeout((function(){L(null)}),5e3)}},function(e){T(e.target.value)}],val:[O,S]}),l.a.createElement("h2",null," Numbers "),l.a.createElement(E,{names:n,fil:f,del:function(e){var t,n;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.target.value,!window.confirm("Do you want to delete ?")){u.next=6;break}return u.next=4,r.a.awrap(b(t));case 4:(n=u.sent).data?(L(n.data),d().then((function(e){a(e)})).catch((function(e){var t=e.response.data.error;I(t),setTimeout((function(){I(null)}),5e3)})),setTimeout((function(){L(null)}),5e3)):("Could not find User",I("Could not find User"),setTimeout((function(){I(null)}),5e3));case 6:T(""),D("");case 8:case"end":return u.stop()}}))}}))}),null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4a25cf49.chunk.js.map